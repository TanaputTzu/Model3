<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js AR Model</title>
    <style>
        body { margin: 0; overflow: hidden; }
        #infoBox {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.75);
            padding: 10px 15px;
            color: white;
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <div id="infoBox"></div>

<script type="module">

import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.163/build/three.module.js';
import { GLTFLoader } from 'https://cdn.jsdelivr.net/npm/three@0.163/examples/jsm/loaders/GLTFLoader.js';
import { ARButton } from 'https://cdn.jsdelivr.net/npm/three@0.163/examples/jsm/webxr/ARButton.js';

let scene, camera, renderer, controller, model;

init();
animate();

function init() {
    scene = new THREE.Scene();

    camera = new THREE.PerspectiveCamera(
        70, window.innerWidth / window.innerHeight, 0.01, 20
    );

    renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.xr.enabled = true;
    document.body.appendChild(renderer.domElement);

    document.body.appendChild(
        ARButton.createButton(renderer, { requiredFeatures: ['hit-test'] })
    );

    controller = renderer.xr.getController(0);
    controller.addEventListener('select', placeModel);
    scene.add(controller);

    const light = new THREE.HemisphereLight(0xffffff, 0xbbbbff, 1);
    scene.add(light);

    const loader = new GLTFLoader();

    loader.load(
        "https://modelagency.pw/ggaa_ZZ.glb",
        (gltf) => {
            model = gltf.scene;
            model.scale.set(0.2, 0.2, 0.2);
            console.log("โมเดลโหลดสำเร็จ");
        },
        undefined,
        (error) => {
            console.error("โหลดโมเดลล้มเหลว:", error);
        }
    );
}

function placeModel() {
    if (!model) return;

    const pos = new THREE.Vector3(0, 0, -0.5)
        .applyMatrix4(controller.matrixWorld);

    model.position.copy(pos);
    scene.add(model);

    showInfo("โมเดลถูกวางแล้ว: ggaa_ZZ.glb");
}

function showInfo(text) {
    const box = document.getElementById("infoBox");
    box.textContent = text;
    box.style.display = "block";
    setTimeout(() => box.style.display = "none", 2500);
}

function animate() {
    renderer.se
