<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Model Viewer + Custom Properties</title>

  <!-- model-viewer -->
  <script type="module"
    src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>

  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
    }
    #info {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: #fafafa;
      white-space: pre-wrap;
    }
    .prop-block {
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #ddd;
    }
  </style>
</head>

<body>

  <h2>Model + Custom Properties</h2>

  <!-- แสดงโมเดล -->
  <model-viewer id="viewer"
    src="https://modelagency.pw/PCL.glb"
    camera-controls
    auto-rotate
    ar
    style="width: 100%; height: 500px;">
  </model-viewer>

  <!-- ส่วนแสดง Custom Properties -->
  <h3>Custom Properties (from Blender)</h3>
  <div id="info">Loading properties...</div>

  <!-- โหลด GLTF เพื่อตรวจสอบ Custom Properties -->
  <script type="module">
    import { GLTFLoader } 
    from "https://cdn.jsdelivr.net/npm/three@0.161/examples/jsm/loaders/GLTFLoader.js";

    const loader = new GLTFLoader();

    loader.load("model.glb", (gltf) => {
      const infoBox = document.getElementById("info");
      infoBox.innerHTML = ""; // เคลียร์ข้อความเดิม

      gltf.scene.traverse((node) => {
        // Custom Properties จะอยู่ใน userData หรือ extras
        if (node.userData && Object.keys(node.userData).length > 0) {
          
          infoBox.innerHTML += `
            <div class="prop-block">
              <strong>Object:</strong> ${node.name}<br>
              <strong>Properties:</strong><br>
              <pre>${JSON.stringify(node.userData, null, 2)}</pre>
            </div>
          `;
        }
      });

      // หากไม่พบ property
      if (infoBox.innerHTML.trim() === "") {
        infoBox.innerHTML = "ไม่พบ Custom Properties ในโมเดลนี้";
      }
    });
  </script>

</body>
</html>
